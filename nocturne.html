<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Detail | Gameplay Programmer</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <style>
        /* --- 1. VARIÁVEIS DO PROJETO (SÓ MUDAS ISTO AQUI) --- */
        :root {
            /* MUDAR ESTA COR EM CADA FICHEIRO */
            --project-color: rgba(107, 38, 36, 1); /* Vermelho para Nocturne */
            --project-glow: rgba(195, 24, 24, 0.773);
        }

        /* --- 2. BASE --- */
        body {
            margin: 0; padding: 0;
            background-color: #050505;
            color: white;
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            cursor: none;
        }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--project-color); }

        /* --- 3. UI COMUM (Cursor & Loading) --- */
        .cursor-dot, .cursor-outline {
            position: fixed; top: 0; left: 0; transform: translate(-50%, -50%);
            pointer-events: none; z-index: 9999; border-radius: 50%; mix-blend-mode: difference;
        }
        .cursor-dot { width: 8px; height: 8px; background: var(--project-color); }
        .cursor-outline { width: 40px; height: 40px; border: 1px solid var(--project-color); transition: 0.2s; }
        
        .loading-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 9999; display: flex; align-items: center; justify-content: center;
        }
        .loading-bar { width: 0%; height: 2px; background: var(--project-color); box-shadow: 0 0 15px var(--project-color); }

        /* --- 4. HERO SECTION --- */
        .project-hero {
            height: 80vh; width: 100%; position: relative;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            border-bottom: 1px solid #222; overflow: hidden;
        }

        /* Imagem de Fundo com Blur */
        .hero-bg {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            /* AQUI METES A IMAGEM DO PROJETO */
            background-image: url('caminho/para/imagem_nocturne.jpg'); 
            background-size: cover; background-position: center;
            opacity: 0.3; filter: blur(10px) grayscale(50%); z-index: 0;
        }

        .back-btn {
            position: absolute; top: 40px; left: 40px; z-index: 20;
            font-family: 'JetBrains Mono', monospace; text-decoration: none;
            color: #888; font-size: 0.9rem; border: 1px solid #333; padding: 10px 20px;
            background: rgba(0,0,0,0.8); transition: 0.3s;
        }
        .back-btn:hover { color: var(--project-color); border-color: var(--project-color); }

        .hero-content {
            z-index: 2; text-align: center;
        }

        .project-title {
            font-size: 8vw; line-height: 0.9; text-transform: uppercase; margin: 0;
            text-shadow: 0 0 50px var(--project-glow);
        }

        .project-meta {
            font-family: 'JetBrains Mono', monospace; color: var(--project-color);
            margin-top: 20px; letter-spacing: 4px; font-size: 1rem;
        }

        /* --- 5. GRID DE DADOS (STATS) --- */
        .stats-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1px; background: #222; border-bottom: 1px solid #222;
        }
        .stat-item {
            background: #000; padding: 40px 20px; text-align: center;
        }
        .stat-label {
            font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; color: #666; margin-bottom: 10px;
        }
        .stat-value {
            font-family: 'Inter', sans-serif; font-weight: bold; font-size: 1.2rem; color: white;
        }

        /* --- 6. CONTEÚDO PRINCIPAL --- */
        .content-wrapper {
            max-width: 900px; margin: 100px auto; padding: 0 20px;
        }

        .section-title {
            font-family: 'JetBrains Mono', monospace; color: var(--project-color);
            font-size: 1.5rem; margin-bottom: 30px; border-left: 3px solid var(--project-color);
            padding-left: 20px; display: flex; align-items: center; gap: 10px;
        }
        
        .text-block {
            font-size: 1.1rem; line-height: 1.6; color: #ccc; margin-bottom: 60px;
        }

        /* CODE BLOCK (Estilo VS Code) */
        .code-block {
            background: #111; border: 1px solid #333; border-radius: 8px; padding: 20px;
            font-family: 'JetBrains Mono', monospace; font-size: 0.9rem; color: #ddd;
            overflow-x: auto; margin-bottom: 60px; position: relative;
        }
        .code-header {
            position: absolute; top: 0; left: 0; width: 100%; background: #1a1a1a;
            padding: 5px 15px; font-size: 0.7rem; color: #666; border-bottom: 1px solid #333;
            box-sizing: border-box;
        }
        .code-content { margin-top: 25px; line-height: 1.5; }
        .keyword { color: #c678dd; } /* Roxo */
        .function { color: #61afef; } /* Azul */
        .string { color: #98c379; } /* Verde */
        .comment { color: #5c6370; font-style: italic; }

        /* IMAGEM NO MEIO DO TEXTO */
        .project-img {
            width: 100%; border-radius: 10px; margin-bottom: 60px;
            border: 1px solid #333;
        }

        /* --- 7. FOOTER --- */
        .next-project {
            height: 40vh; display: flex; justify-content: center; align-items: center;
            background: #080808; border-top: 1px solid #222; text-decoration: none;
            transition: 0.3s;
        }
        .next-project:hover { background: #111; }
        .next-label {
            font-family: 'JetBrains Mono', monospace; color: #666; font-size: 1rem; margin-bottom: 10px;
        }
        .next-title {
            font-size: 4rem; color: white; margin: 0; text-transform: uppercase;
            transition: 0.3s;
        }
        .next-project:hover .next-title { color: var(--project-color); text-shadow: 0 0 30px var(--project-glow); }

        .media-grid {
            display: grid;
            grid-template-columns: 1fr 1fr; /* Duas colunas iguais */
            gap: 20px; /* Espaço entre os vídeos */
            margin-bottom: 60px;
        }

        /* --- VIDEOS PEQUENOS (Grid) --- */
        .project-video {
            width: 100%;
            height: auto;
            border-radius: 10px;
            border: 1px solid #333;
            display: block; 
            cursor: pointer; /* Mostra que é clicável */
            transition: transform 0.3s ease, border-color 0.3s ease;
        }
        .project-video:hover {
            transform: scale(1.02); /* Pequeno zoom ao passar o rato */
            border-color: var(--project-color);
            box-shadow: 0 0 20px var(--project-glow);
        }

        /* --- LIGHTBOX (O Popup Gigante) --- */
        .video-lightbox {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 10000; /* Fica por cima de TUDO */
            display: flex; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; /* Escondido inicialmente */
            transition: opacity 0.3s ease;
        }

        /* Quando ativamos a classe 'active', ele aparece */
        .video-lightbox.active { opacity: 1; pointer-events: all; }

        .lightbox-bg {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.9); /* Fundo quase preto */
            backdrop-filter: blur(5px);
        }

        .lightbox-content {
            position: relative; z-index: 10001; width: 80%; max-width: 1200px;
            display: flex; flex-direction: column; align-items: flex-end; gap: 10px;
        }

        .lightbox-player {
            width: 100%; height: auto;
            border: 1px solid var(--project-color);
            border-radius: 8px;
            box-shadow: 0 0 50px rgba(0,0,0,0.8);
        }

        .lightbox-close {
            font-family: 'JetBrains Mono', monospace; color: #666; cursor: pointer;
            font-size: 0.9rem; transition: 0.3s;
        }
        .lightbox-close:hover { color: var(--project-color); }

                /* --- CORREÇÃO FINAL DO CURSOR NO LIGHTBOX --- */
        
        /* Quando o body tem a classe 'lightbox-active' (lightbox aberto) */
        body.lightbox-active .cursor-dot,
        body.lightbox-active .cursor-outline {
            /* 1. Desliga o modo que o torna invisível no preto */
            mix-blend-mode: normal !important; 
            
            /* 2. Força a cor Ciano brilhante para se ver bem */
            background: #a50d0d !important;
            border-color: #4d0505 !important;
            box-shadow: 0 0 20px #520e0e; /* Um brilhozinho extra */

            /* 3. Z-Index máximo possível num browser (para ter a certeza absoluta) */
            z-index: 2147483647 !important; 
        }

        /* =========================================
           MOBILE FIXES (Tudo o que é < 768px)
           ========================================= */
        @media (max-width: 768px) {
            
            /* 1. MATA O CURSOR PERSONALIZADO (Telemóvel não tem rato) */
            .cursor-dot, .cursor-outline { display: none !important; }
            * { cursor: auto !important; }
            
            /* 2. AJUSTA O HERO (TEXTO E BONECO) */
            .hero-title {
                font-size: 15vw !important; /* Texto mais pequeno */
                top: 30% !important; /* Sobe o texto para não ficar atrás do boneco */
                width: 90%;
                left: 5%;
                transform: none !important; /* Remove transformações complexas */
                text-align: center;
            }

            .role-badge {
                bottom: 15% !important; /* Sobe a badge */
                font-size: 0.8rem;
                padding: 8px 16px;
            }

            .character-container {
                right: -30% !important; /* Empurra o boneco para a direita */
                width: 120% !important; /* Aumenta para ocupar o fundo */
                opacity: 0.6; /* Um pouco mais transparente para ler o texto */
            }

            /* 3. PROJETOS (AJUSTA OS CARTÕES PARA O TAMANHO DO ECRÃ) */
            .game-card {
                width: 85vw !important; /* Cartão ocupa 85% da largura do telemóvel */
                height: 60vh !important; /* Menos alto */
                margin-right: 15px; /* Menos espaço entre cartões */
            }
            
            .game-info h2 { font-size: 2rem; } /* Título do jogo mais pequeno */

            /* 4. PÁGINAS DE PROJETO (VIDEO CLIPS E TEXTO) */
            .content-wrapper {
                width: 90% !important;
                padding: 20px 0;
            }
            
            .text-block { font-size: 1rem; }

            /* Mete os vídeos um em cima do outro em vez de lado a lado */
            .media-grid {
                grid-template-columns: 1fr !important; 
            }

            /* 5. LIGHTBOX (ZOOM) */
            .lightbox-content {
                width: 95% !important;
            }
            .lightbox-close {
                padding: 15px; /* Área de toque maior para o dedo */
                font-size: 1.2rem;
            }
            
            /* 6. FOOTER (JÁ TINHAS, MAS REFORÇO AQUI) */
            .about-container {
                flex-direction: column !important;
                gap: 30px;
            }
            .about-image-wrapper { width: 150px; height: 150px; }
            
            /* 7. GERAL */
            body { overflow-x: hidden; } /* Impede o site de "abanar" para os lados */
        }

    </style>
</head>
<body>

    <div class="loading-screen"><div class="loading-bar"></div></div>
    <div class="cursor-dot"></div><div class="cursor-outline"></div>

    <div class="project-hero">
        <div class="hero-bg"></div> <a href="index.html" class="back-btn">< RETURN TO BASE</a>
        
        <div class="hero-content">
            <h1 class="project-title">NOCTURNE<br>BATTLEGROUNDS</h1>
            <div class="project-meta">MISSION 01 // ROBLOX</div>
        </div>
    </div>

    <div class="stats-grid">
        <div class="stat-item">
            <div class="stat-label">ROLE</div>
            <div class="stat-value">Gameplay Programmer</div>
        </div>
        <div class="stat-item">
            <div class="stat-label">ENGINE</div>
            <div class="stat-value">ROBLOX</div>
        </div>
        <div class="stat-item">
            <div class="stat-label">LANGUAGE</div>
            <div class="stat-value">LUAU</div>
        </div>
        <div class="stat-item">
            <div class="stat-label">STATUS</div>
            <div class="stat-value">Released</div>
        </div>
    </div>

    <div class="content-wrapper">
        
        <div class="section-title">01. OVERVIEW</div>
        <div class="text-block">
            Nocturne Battlegrounds is a multiplayer arena pvp game where vampires fight for supremacy in a gothic town, their greatest enemy being the sun itself.
            My main responsibility was implementing the <strong>Combat System</strong> and <strong>Network Replication</strong> 
            to ensure lag-free combat for up to 15 players.
        </div>

        <div class="media-grid">
            <video class="project-video" autoplay loop muted playsinline>
                <source src="NocturneBattlegrounds/NocturneBGClip1.mp4" type="video/mp4">
            </video>
            
            <video class="project-video" autoplay loop muted playsinline>
                <source src="NocturneBattlegrounds/NocturneBGClip2.mp4" type="video/mp4">
            </video>
        </div>

        <div class="section-title">02. TECHNICAL CHALLENGE: COMBAT SYSTEM</div>
        <div class="text-block">
            Designing a responsive and satisfying combat system was a major challenge. 
            I implemented a raycast system that calculates hit detection in real-time, 
            ensuring accurate punches even at low duration hitboxes.
        </div>

        <div class="section-title">03. TECHNICAL CHALLENGE: NETWORK REPLICATION</div>
        <div class="text-block">
            I created a Client-server communication that creates attacks on the client and then validates them on the server, 
            if the attack is valid, the server replicates the vfx's to all clients. This approach minimizes latency and ensures a smooth gameplay experience for all players.
        </div>

        <div class="code-block">
                    <div class="code-header">CombatSystem.server.lua</div>
                    
                    <div class="code-content" style="white-space: pre-wrap;">
        <span class="keyword">UIS.InputEnded:Connect</span>(<span class="function">function</span>(I, E)
            <span class="comment">-- Calls the server when input is ended</span>
            <span class="keyword">if</span> I.UserInputType == Enum.UserInputType.MouseButton1 <span class="keyword">then</span>
                <span class="keyword">if</span> combo == 1 <span class="keyword">then</span>
                    game.ReplicatedStorage.MainEvent:<span class="function">FireServer</span>(<span class="string">"Regular1"</span>)
                    enemyChar:<span class="function">SetAttribute</span>(<span class="string">"Stunned"</span>, <span class="keyword">true</span>)
                    enemyHum:<span class="function">TakeDamage</span>(DAMAGE)
                <span class="keyword">end</span>
            <span class="keyword">end</span>
        <span class="keyword">end</span>)
                    </div>
                </div>

    <div class="video-lightbox">
        <div class="lightbox-bg"></div> <div class="lightbox-content">
            <video class="lightbox-player" controls autoplay>
                <source src="" type="video/mp4">
            </video>
            <div class="lightbox-close">CLOSE FEED [X]</div>
        </div>
    </div>

        </div> <a href="cyber.html" class="next-project">
        <div style="text-align: center;">
            <div class="next-label">NEXT MISSION</div>
            <h2 class="next-title">CYBER ENG. ></h2>
        </div>
    </a>


    <script>
        gsap.registerPlugin(ScrollTrigger);

        // LOADING
        const loadingBar = document.querySelector('.loading-bar');
        const loadingScreen = document.querySelector('.loading-screen');
        gsap.to(loadingBar, { width: "100%", duration: 1, ease: "power2.inOut", onComplete: () => {
            gsap.to(loadingScreen, { opacity: 0, duration: 0.5, onComplete: () => loadingScreen.remove() });
        }});

        // CURSOR
        const cursorDot = document.querySelector('.cursor-dot');
        const cursorOutline = document.querySelector('.cursor-outline');
        window.addEventListener("mousemove", (e) => {
            cursorDot.style.left = `${e.clientX}px`;
            cursorDot.style.top = `${e.clientY}px`;
            cursorOutline.animate({ left: `${e.clientX}px`, top: `${e.clientY}px` }, { duration: 500, fill: "forwards" });
        });

        // ANIMATIONS
        gsap.from(".project-title", { y: 100, opacity: 0, duration: 1, delay: 0.5 });
        gsap.from(".stat-item", { y: 20, opacity: 0, duration: 0.5, stagger: 0.1, delay: 0.8 });
        
        gsap.utils.toArray(".section-title").forEach(title => {
            gsap.from(title, {
                scrollTrigger: { trigger: title, start: "top 80%" },
                x: -50, opacity: 0, duration: 0.8
            });
        });

        // --- LIGHTBOX LÓGICA ---
        const lightbox = document.querySelector('.video-lightbox');
        const lightboxPlayer = document.querySelector('.lightbox-player');
        const lightboxBg = document.querySelector('.lightbox-bg');
        const lightboxClose = document.querySelector('.lightbox-close');
        
        // Seleciona todos os vídeos da grelha
        const gridVideos = document.querySelectorAll('.project-video');

        gridVideos.forEach(vid => {
            vid.addEventListener('click', function() {
                // 1. Pega no ficheiro do vídeo clicado
                const source = this.querySelector('source').src;
                
                // 2. Mete esse ficheiro no leitor grande
                lightboxPlayer.src = source;
                document.body.classList.add('lightbox-active');
                
                // 3. Mostra o Lightbox
                lightbox.classList.add('active');
                
                // 4. Começa a tocar com som
                lightboxPlayer.muted = false; 
                lightboxPlayer.play();
            });
        });

        // Função para fechar
        function closeLightbox() {
            lightbox.classList.remove('active');
            document.body.classList.remove('lightbox-active');
            lightboxPlayer.pause();
            lightboxPlayer.src = ""; // Limpa para não continuar a gastar memória
        }

        lightboxBg.addEventListener('click', closeLightbox);
        lightboxClose.addEventListener('click', closeLightbox);

    </script>
</body>
</html>